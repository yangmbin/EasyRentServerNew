{"version":3,"sources":["webpack:///3.build.js","webpack:///./src/components/addRecommend.vue","webpack:///./src/components/addRecommend.vue?7299","webpack:///./src/components/addRecommend.vue?3b7e","webpack:///src/components/addRecommend.vue","webpack:///./src/components/addRecommend.vue?8caf"],"names":["webpackJsonp","58","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_addRecommend_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e884ed3c_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_addRecommend_vue__","normalizeComponent","__vue_styles__","Component","82","exports","content","i","locals","83","undefined","push","84","data","formValidate","houseId","ruleValidate","required","message","trigger","imgName","visible","houseImgList","houseInfoList","uploadUrl","this","$api","getAllHouseUrl","addRecommendUrl","methods","handleSubmit","name","_this","$refs","validate","valid","length","path","$Notice","warning","title","post","image","houseid","s","console","log","success","handleReset","upload","fileList","$Message","msg","error","resetFields","handleView","handleRemove","file","splice","indexOf","handleSuccess","res","url","imgUrl","handleFormatError","desc","handleMaxSize","handleBeforeUpload","check","mounted","created","_this2","get","85","render","_vm","_h","$createElement","_c","_self","attrs","slot","_v","ref","model","rules","label-width","label","_l","item","staticClass","status","src","type","nativeOn","click","$event","percent","percentage","hide-info","_e","staticStyle","display","width","show-upload-list","on-success","format","max-size","on-format-error","on-exceeded-size","before-upload","action","height","line-height","size","callback","$$v","expression","prop","placeholder","$set","id","_s","city","region","address","on","margin-left","staticRenderFns","esExports"],"mappings":"AAAAA,cAAc,IAERC,GACA,SAAUC,EAAQC,EAAqBC,GAE7C,YCLA,SAAAC,GAAAC,GACAF,EAAA,IDKAG,OAAOC,eAAeL,EAAqB,cAAgBM,OAAO,GAC7C,IAAIC,GAAwHN,EAAoB,ICPrKO,EAAAP,EAAA,IAGAQ,EAAAR,EAAA,IAQAS,EAAAR,EAKAS,EAAAF,EACAF,EAAA,EACAC,EAAA,GATA,EAWAE,EAPA,KAEA,KAUAV,GAAA,QAAAW,EAAA,SDcMC,GACA,SAAUb,EAAQc,EAASZ,GErCjC,GAAAa,GAAAb,EAAA,GACA,iBAAAa,SAAAf,EAAAgB,EAAAD,EAAA,MACAA,EAAAE,SAAAjB,EAAAc,QAAAC,EAAAE,OAEAf,GAAA,cAAAa,GAAA,IF8CMG,GACA,SAAUlB,EAAQc,EAASZ,GGtDjCY,EAAAd,EAAAc,QAAAZ,EAAA,OAAAiB,IAKAL,EAAAM,MAAApB,EAAAgB,EAAA,6jBAAolB,MH+D9kBK,GACA,SAAUrB,EAAQC,EAAqBC,GAE7C,YIcAD,GAAA,GJyEIqB,KAAM,WACF,OACIC,cACIC,QItEhB,IJwEYC,cACID,UACIE,UItEpB,EJuEoBC,QItEpB,UJuEoBC,QInEpB,YJsEYC,QIrEZ,GJsEYC,SIrEZ,EJsEYC,gBACAC,iBACAC,UAAWC,KAAKC,KIrE5BF,UJsEYG,eIrEZ,6BJsEYC,gBIpEZ,0BJwEIC,SAEIC,aAAc,SAAsBC,GItE5C,GAAAC,GAAAP,IJyEYA,MAAKQ,MAAMF,GAAMG,SAAS,SAAUC,GAC5BA,IAEiC,GAA7BH,EAAMV,aAAac,YAA6C1B,IAA9BsB,EAAMV,aAAa,GAAGe,KACxDL,EAAMM,QAAQC,SACVC,MIvE5B,gBJ0EwBR,EAAMN,KIxE9Be,KAAAT,EACAJ,iBAAAc,MAAAV,EAAAV,aAAA,GACAe,KJuE4BM,QAASX,EAAMlB,aIrE3CC,SJsE2B,SAAU6B,GACTC,QAAQC,IIrEpCF,GJsEgCA,EAAEG,SAEFf,EAAMgB,YIrEtC,gBJsEgChB,EAAMC,MAAMgB,OAAOC,YACnBlB,EAAMV,aAAeU,EAAMC,MAAMgB,OIpEjEC,SJsEgClB,EAAMmB,SAASJ,QAAQH,EIrEvDQ,MJuEgCpB,EAAMmB,SAASE,MAAMT,EIrErDQ,WJ4EQJ,YAAa,SAAqBjB,GAC9BN,KAAKQ,MAAMF,GIpEvBuB,cJqEY7B,KAAKQ,MAAMgB,OAAOC,YAClBzB,KAAKH,aAAeG,KAAKQ,MAAMgB,OIpE3CC,UJsEQK,WAAY,SAAoBxB,GAC5BN,KAAKL,QIpEjBW,EJqEYN,KAAKJ,SIpEjB,GJsEQmC,aAAc,SAAsBC,GAChC,GAAIP,GAAWzB,KAAKQ,MAAMgB,OIpEtCC,QJqEYzB,MAAKQ,MAAMgB,OAAOC,SAASQ,OAAOR,EAASS,QAAQF,GIpE/D,IJsEQG,cAAe,SAAuBC,EAAKJ,GACvCZ,QAAQC,IIpEpBe,GJqEYhB,QAAQC,IIpEpBW,GJqEgBI,EAAId,UACJU,EAAKK,IAAMrC,KAAKC,KAAKqC,OAASF,EIpE9CxB,KJqEgBoB,EAAK1B,KAAON,KAAKC,KAAKqC,OAASF,EIpE/CxB,KJqEgBoB,EAAKpB,KAAOwB,EIpE5BxB,OJuEQ2B,kBAAmB,SAA2BP,GAC1ChC,KAAKa,QAAQC,SACTC,MIpEhB,UJqEgByB,KInEhB,kBJsEQC,cAAe,SAAuBT,GAClChC,KAAKa,QAAQC,SACTC,MIpEhB,WJqEgByB,KInEhB,gBJsEQE,mBAAoB,WAChB,GAAIC,GAAQ3C,KAAKH,aAAac,OIpE1C,CJ0EY,OALKgC,IACD3C,KAAKa,QAAQC,SACTC,MInEpB,eAEA4B,IJuEIC,QAAS,WACL5C,KAAKH,aAAeG,KAAKQ,MAAMgB,OIpEvCC,UJuEIoB,QAAS,WIrEb,GAAAC,GAAA9C,IJwEQA,MAAKC,KAAK8C,IAAI/C,KAAKE,eAAgB,KAAM,SAAUiB,GAC/CC,QAAQC,IIvEpBF,GJwEY2B,EAAOhD,cIvEnBqB,OJ8EM6B,GACA,SAAUlF,EAAQC,EAAqBC,GAE7C,YKnRA,IAAAiF,GAAA,WAA0B,GAAAC,GAAAlD,KAAamD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,QAAAA,EAAA,KAA0BE,OAAOC,KAAA,SAAeA,KAAA,UAAcN,EAAAO,GAAA,iBAAAP,EAAAO,GAAA,KAAAJ,EAAA,QAAiDK,IAAA,eAAAH,OAA0BI,MAAAT,EAAA7D,aAAAuE,MAAAV,EAAA3D,aAAAsE,cAAA,MAAoER,EAAA,YAAiBE,OAAOO,MAAA,UAAgBZ,EAAAa,GAAAb,EAAA,sBAAAc,GAA2C,MAAAX,GAAA,OAAiBY,YAAA,qBAA+B,aAAAD,EAAAE,QAAAb,EAAA,OAA0CE,OAAOY,IAAAH,EAAA3B,OAAgBa,EAAAO,GAAA,KAAAJ,EAAA,OAAwBY,YAAA,2BAAqCZ,EAAA,QAAaE,OAAOa,KAAA,mBAAyBC,UAAWC,MAAA,SAAAC,GAAyBrB,EAAApB,WAAAkC,EAAA1D,UAA4B4C,EAAAO,GAAA,KAAAJ,EAAA,QAAyBE,OAAOa,KAAA,qBAA2BC,UAAWC,MAAA,SAAAC,GAAyBrB,EAAAnB,aAAAiC,QAAyB,KAAAA,EAAA,aAAAX,EAAA,YAA2CE,OAAOiB,QAAAR,EAAAS,WAAAC,YAAA,MAA0CxB,EAAAyB,OAAA,KAAgBzB,EAAAO,GAAA,KAAAJ,EAAA,UAA2BK,IAAA,SAAAkB,aAA0BC,QAAA,eAAAC,MAAA,QAAwCvB,OAAQwB,oBAAA,EAAAC,aAAA9B,EAAAf,cAAA8C,QAAA,oBAAAC,WAAA,KAAAC,kBAAAjC,EAAAX,kBAAA6C,mBAAAlC,EAAAT,cAAA4C,gBAAAnC,EAAAR,mBAAA0B,KAAA,OAAAkB,OAAApC,EAAAnD,aAAgQsD,EAAA,OAAYuB,aAAaE,MAAA,OAAAS,OAAA,OAAAC,cAAA,UAAqDnC,EAAA,QAAaE,OAAOa,KAAA,SAAAqB,KAAA,SAA6B,KAAAvC,EAAAO,GAAA,KAAAJ,EAAA,SAAgCE,OAAOxC,MAAA,QAAe4C,OAAQtF,MAAA6E,EAAA,QAAAwC,SAAA,SAAAC,GAA6CzC,EAAAtD,QAAA+F,GAAgBC,WAAA,aAAuB1C,EAAA,QAAAG,EAAA,OAA0BuB,aAAaE,MAAA,QAAevB,OAAQY,IAAAjB,EAAAvD,WAAmBuD,EAAAyB,QAAA,GAAAzB,EAAAO,GAAA,KAAAJ,EAAA,YAA4CE,OAAOO,MAAA,OAAA+B,KAAA,aAAiCxC,EAAA,UAAeY,YAAA,cAAAV,OAAiCuC,YAAA,WAAwBnC,OAAQtF,MAAA6E,EAAA7D,aAAA,QAAAqG,SAAA,SAAAC,GAA0DzC,EAAA6C,KAAA7C,EAAA7D,aAAA,UAAAsG,IAA2CC,WAAA,0BAAoC1C,EAAAa,GAAAb,EAAA,uBAAAc,GAA4C,OAAAX,EAAA,UAAqBE,OAAOlF,MAAA2F,EAAAgC,GAAA,MAAsB9C,EAAAO,GAAAP,EAAA+C,GAAAjC,EAAAkC,KAAAlC,EAAAmC,OAAAnC,EAAAoC,gBAA4D,OAAAlD,EAAAO,GAAA,KAAAJ,EAAA,YAAAA,EAAA,UAAkDE,OAAOa,KAAA,WAAiBiC,IAAK/B,MAAA,SAAAC,GAAyBrB,EAAA7C,aAAA,oBAAmC6C,EAAAO,GAAA,QAAAP,EAAAO,GAAA,KAAAJ,EAAA,UAA0CuB,aAAa0B,cAAA,OAAoB/C,OAAQa,KAAA,SAAeiC,IAAK/B,MAAA,SAAAC,GAAyBrB,EAAA3B,YAAA,oBAAkC2B,EAAAO,GAAA,qBACnzE8C,KACAC,GAAiBvD,SAAAsD,kBACjBxI,GAAA","file":"3.build.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 58:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_addRecommend_vue__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e884ed3c_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_addRecommend_vue__ = __webpack_require__(85);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(82)\n}\nvar normalizeComponent = __webpack_require__(13)\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_addRecommend_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e884ed3c_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_addRecommend_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 82:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(83);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(3)(\"b346cd82\", content, true);\n\n/***/ }),\n\n/***/ 83:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(2)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".input-width{width:240px}.demo-upload-list{display:inline-block;width:60px;height:60px;text-align:center;line-height:60px;border:1px solid transparent;border-radius:4px;overflow:hidden;background:#fff;position:relative;box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.demo-upload-list img{width:100%;height:100%}.demo-upload-list-cover{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6)}.demo-upload-list:hover .demo-upload-list-cover{display:block}.demo-upload-list-cover i{color:#fff;font-size:20px;cursor:pointer;margin:0 2px}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 84:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    data: function data() {\n        return {\n            formValidate: {\n                houseId: \"\"\n            },\n            ruleValidate: {\n                houseId: [{\n                    required: true,\n                    message: \"请选择对应公寓\",\n                    trigger: \"change\"\n                }]\n            },\n            imgName: \"\",\n            visible: false,\n            houseImgList: [],\n            houseInfoList: [],\n            uploadUrl: this.$api.uploadUrl,\n            getAllHouseUrl: \"/manage/get_all_house_info\",\n            addRecommendUrl: \"/manage/add_recommend\"\n        };\n    },\n\n    methods: {\n        // 提交\n        handleSubmit: function handleSubmit(name) {\n            var _this = this;\n\n            this.$refs[name].validate(function (valid) {\n                if (valid) {\n                    // 第二个判断是那种正在上传过程中\n                    if (_this.houseImgList.length == 0 || _this.houseImgList[0].path == undefined) {\n                        _this.$Notice.warning({\n                            title: \"请上传Banner图片\"\n                        });\n                    } else {\n                        _this.$api.post(_this.addRecommendUrl, { image: _this.houseImgList[0].path,\n                            houseid: _this.formValidate.houseId\n                        }, function (s) {\n                            console.log(s);\n                            if (s.success) {\n                                // 成功后，重置数据\n                                _this.handleReset(\"formValidate\");\n                                _this.$refs.upload.fileList = [];\n                                _this.houseImgList = _this.$refs.upload.fileList;\n\n                                _this.$Message.success(s.msg);\n                            } else {\n                                _this.$Message.error(s.msg);\n                            }\n                        });\n                    }\n                }\n            });\n        },\n        handleReset: function handleReset(name) {\n            this.$refs[name].resetFields();\n            this.$refs.upload.fileList = [];\n            this.houseImgList = this.$refs.upload.fileList;\n        },\n        handleView: function handleView(name) {\n            this.imgName = name;\n            this.visible = true;\n        },\n        handleRemove: function handleRemove(file) {\n            var fileList = this.$refs.upload.fileList;\n            this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\n        },\n        handleSuccess: function handleSuccess(res, file) {\n            console.log(res);\n            console.log(file);\n            if (res.success) {\n                file.url = this.$api.imgUrl + res.path;\n                file.name = this.$api.imgUrl + res.path;\n                file.path = res.path;\n            }\n        },\n        handleFormatError: function handleFormatError(file) {\n            this.$Notice.warning({\n                title: \"文件格式不正确\",\n                desc: \"请选择jpg或png格式\"\n            });\n        },\n        handleMaxSize: function handleMaxSize(file) {\n            this.$Notice.warning({\n                title: \"文件大小超过限制\",\n                desc: \"文件大小不能大于2M\"\n            });\n        },\n        handleBeforeUpload: function handleBeforeUpload() {\n            var check = this.houseImgList.length < 1;\n            if (!check) {\n                this.$Notice.warning({\n                    title: \"最多只能上传1张图片\"\n                });\n            }\n            return check;\n        }\n    },\n    mounted: function mounted() {\n        this.houseImgList = this.$refs.upload.fileList;\n    },\n\n    created: function created() {\n        var _this2 = this;\n\n        this.$api.get(this.getAllHouseUrl, null, function (s) {\n            console.log(s);\n            _this2.houseInfoList = s;\n        });\n    }\n});\n\n/***/ }),\n\n/***/ 85:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"公寓推荐 / 添加推荐\")]),_vm._v(\" \"),_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"rules\":_vm.ruleValidate,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"推荐图片\"}},[_vm._l((_vm.houseImgList),function(item){return _c('div',{staticClass:\"demo-upload-list\"},[(item.status === 'finished')?[_c('img',{attrs:{\"src\":item.url}}),_vm._v(\" \"),_c('div',{staticClass:\"demo-upload-list-cover\"},[_c('Icon',{attrs:{\"type\":\"ios-eye-outline\"},nativeOn:{\"click\":function($event){_vm.handleView(item.name)}}}),_vm._v(\" \"),_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"},nativeOn:{\"click\":function($event){_vm.handleRemove(item)}}})],1)]:[(item.showProgress)?_c('Progress',{attrs:{\"percent\":item.percentage,\"hide-info\":\"\"}}):_vm._e()]],2)}),_vm._v(\" \"),_c('Upload',{ref:\"upload\",staticStyle:{\"display\":\"inline-block\",\"width\":\"58px\"},attrs:{\"show-upload-list\":false,\"on-success\":_vm.handleSuccess,\"format\":['jpg','jpeg','png'],\"max-size\":2048,\"on-format-error\":_vm.handleFormatError,\"on-exceeded-size\":_vm.handleMaxSize,\"before-upload\":_vm.handleBeforeUpload,\"type\":\"drag\",\"action\":_vm.uploadUrl}},[_c('div',{staticStyle:{\"width\":\"58px\",\"height\":\"58px\",\"line-height\":\"58px\"}},[_c('Icon',{attrs:{\"type\":\"camera\",\"size\":\"20\"}})],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"查看图片\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[(_vm.visible)?_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.imgName}}):_vm._e()])],2),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"对应公寓\",\"prop\":\"houseId\"}},[_c('Select',{staticClass:\"input-width\",attrs:{\"placeholder\":\"请选择对应公寓\"},model:{value:(_vm.formValidate.houseId),callback:function ($$v) {_vm.$set(_vm.formValidate, \"houseId\", $$v)},expression:\"formValidate.houseId\"}},[_vm._l((_vm.houseInfoList),function(item){return [_c('Option',{attrs:{\"value\":item.id + ''}},[_vm._v(_vm._s(item.city + item.region + item.address))])]})],2)],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('formValidate')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"type\":\"ghost\"},on:{\"click\":function($event){_vm.handleReset('formValidate')}}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 3.build.js","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e884ed3c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./addRecommend.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./addRecommend.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e884ed3c\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./addRecommend.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/addRecommend.vue\n// module id = 58\n// module chunks = 3","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?minimize!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e884ed3c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./addRecommend.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"b346cd82\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-e884ed3c\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/addRecommend.vue\n// module id = 82\n// module chunks = 3","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".input-width{width:240px}.demo-upload-list{display:inline-block;width:60px;height:60px;text-align:center;line-height:60px;border:1px solid transparent;border-radius:4px;overflow:hidden;background:#fff;position:relative;box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.demo-upload-list img{width:100%;height:100%}.demo-upload-list-cover{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6)}.demo-upload-list:hover .demo-upload-list-cover{display:block}.demo-upload-list-cover i{color:#fff;font-size:20px;cursor:pointer;margin:0 2px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-e884ed3c\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/addRecommend.vue\n// module id = 83\n// module chunks = 3","<style>\r\n.input-width {\r\n    width: 240px;\r\n}\r\n.demo-upload-list {\r\n    display: inline-block;\r\n    width: 60px;\r\n    height: 60px;\r\n    text-align: center;\r\n    line-height: 60px;\r\n    border: 1px solid transparent;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n    background: #fff;\r\n    position: relative;\r\n    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\r\n    margin-right: 4px;\r\n}\r\n.demo-upload-list img {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n.demo-upload-list-cover {\r\n    display: none;\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0, 0, 0, 0.6);\r\n}\r\n.demo-upload-list:hover .demo-upload-list-cover {\r\n    display: block;\r\n}\r\n.demo-upload-list-cover i {\r\n    color: #fff;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    margin: 0 2px;\r\n}\r\n</style>\r\n\r\n<template>\r\n    <Card>\r\n        <p slot=\"title\">公寓推荐 / 添加推荐</p>\r\n        <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"80\">\r\n            <FormItem label=\"推荐图片\">\r\n                <div class=\"demo-upload-list\" v-for=\"item in houseImgList\">\r\n                    <template v-if=\"item.status === 'finished'\">\r\n                        <img :src=\"item.url\">\r\n                        <div class=\"demo-upload-list-cover\">\r\n                            <Icon type=\"ios-eye-outline\" @click.native=\"handleView(item.name)\"></Icon>\r\n                            <Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item)\"></Icon>\r\n                        </div>\r\n                    </template>\r\n                    <template v-else>\r\n                        <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\r\n                    </template>\r\n                </div>\r\n                <Upload ref=\"upload\" :show-upload-list=\"false\" :on-success=\"handleSuccess\" :format=\"['jpg','jpeg','png']\" :max-size=\"2048\" :on-format-error=\"handleFormatError\" :on-exceeded-size=\"handleMaxSize\" :before-upload=\"handleBeforeUpload\" type=\"drag\" :action=\"uploadUrl\" style=\"display: inline-block;width:58px;\">\r\n                    <div style=\"width: 58px;height:58px;line-height: 58px;\">\r\n                        <Icon type=\"camera\" size=\"20\"></Icon>\r\n                    </div>\r\n                </Upload>\r\n                <Modal title=\"查看图片\" v-model=\"visible\">\r\n                    <img :src=\"imgName\" v-if=\"visible\" style=\"width: 100%\">\r\n                </Modal>\r\n            </FormItem>\r\n            <FormItem label=\"对应公寓\" prop=\"houseId\">\r\n                <Select v-model=\"formValidate.houseId\" placeholder=\"请选择对应公寓\" class=\"input-width\">\r\n                    <template v-for=\"item in houseInfoList\">\r\n                        <Option :value=\"item.id + ''\">{{item.city + item.region + item.address}}</Option>\r\n                    </template>\r\n                </Select>\r\n            </FormItem>\r\n\r\n            <FormItem>\r\n                <Button type=\"primary\" @click=\"handleSubmit('formValidate')\">保存</Button>\r\n                <Button type=\"ghost\" @click=\"handleReset('formValidate')\" style=\"margin-left: 8px\">重置</Button>\r\n            </FormItem>\r\n        </Form>\r\n\r\n    </Card>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            formValidate: {\r\n                houseId: \"\"\r\n            },\r\n            ruleValidate: {\r\n                houseId: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请选择对应公寓\",\r\n                        trigger: \"change\"\r\n                    }\r\n                ]\r\n            },\r\n            imgName: \"\",\r\n            visible: false,\r\n            houseImgList: [],\r\n            houseInfoList: [],\r\n            uploadUrl: this.$api.uploadUrl,\r\n            getAllHouseUrl: \"/manage/get_all_house_info\",\r\n            addRecommendUrl: \"/manage/add_recommend\"\r\n        };\r\n    },\r\n    methods: {\r\n        // 提交\r\n        handleSubmit(name) {\r\n            this.$refs[name].validate(valid => {\r\n                if (valid) {\r\n                    // 第二个判断是那种正在上传过程中\r\n                    if (this.houseImgList.length == 0 || this.houseImgList[0].path == undefined) {\r\n                        this.$Notice.warning({\r\n                            title: \"请上传Banner图片\"\r\n                        });\r\n                    } else {\r\n                        this.$api.post(\r\n                            this.addRecommendUrl,\r\n                            {   image: this.houseImgList[0].path,\r\n                                houseid: this.formValidate.houseId\r\n                            },\r\n                            s => {\r\n                                console.log(s);\r\n                                if (s.success) {\r\n                                    // 成功后，重置数据\r\n                                    this.handleReset(\"formValidate\");\r\n                                    this.$refs.upload.fileList = [];\r\n                                    this.houseImgList = this.$refs.upload.fileList;\r\n\r\n                                    this.$Message.success(s.msg);\r\n                                } else {\r\n                                    this.$Message.error(s.msg);\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        handleReset(name) {\r\n            this.$refs[name].resetFields();\r\n            this.$refs.upload.fileList = [];\r\n            this.houseImgList = this.$refs.upload.fileList;\r\n        },\r\n        handleView(name) {\r\n            this.imgName = name;\r\n            this.visible = true;\r\n        },\r\n        handleRemove(file) {\r\n            const fileList = this.$refs.upload.fileList;\r\n            this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\r\n        },\r\n        handleSuccess(res, file) {\r\n            console.log(res);\r\n            console.log(file);\r\n            if (res.success) {\r\n                file.url = this.$api.imgUrl + res.path;\r\n                file.name = this.$api.imgUrl + res.path;\r\n                file.path = res.path;\r\n            }\r\n        },\r\n        handleFormatError(file) {\r\n            this.$Notice.warning({\r\n                title: \"文件格式不正确\",\r\n                desc: \"请选择jpg或png格式\"\r\n            });\r\n        },\r\n        handleMaxSize(file) {\r\n            this.$Notice.warning({\r\n                title: \"文件大小超过限制\",\r\n                desc: \"文件大小不能大于2M\"\r\n            });\r\n        },\r\n        handleBeforeUpload() {\r\n            const check = this.houseImgList.length < 1;\r\n            if (!check) {\r\n                this.$Notice.warning({\r\n                    title: \"最多只能上传1张图片\"\r\n                });\r\n            }\r\n            return check;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.houseImgList = this.$refs.upload.fileList;\r\n    },\r\n    created: function() {\r\n        this.$api.get(this.getAllHouseUrl, null, s => {\r\n            console.log(s);\r\n            this.houseInfoList = s;\r\n        });\r\n    }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/addRecommend.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"公寓推荐 / 添加推荐\")]),_vm._v(\" \"),_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"rules\":_vm.ruleValidate,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"推荐图片\"}},[_vm._l((_vm.houseImgList),function(item){return _c('div',{staticClass:\"demo-upload-list\"},[(item.status === 'finished')?[_c('img',{attrs:{\"src\":item.url}}),_vm._v(\" \"),_c('div',{staticClass:\"demo-upload-list-cover\"},[_c('Icon',{attrs:{\"type\":\"ios-eye-outline\"},nativeOn:{\"click\":function($event){_vm.handleView(item.name)}}}),_vm._v(\" \"),_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"},nativeOn:{\"click\":function($event){_vm.handleRemove(item)}}})],1)]:[(item.showProgress)?_c('Progress',{attrs:{\"percent\":item.percentage,\"hide-info\":\"\"}}):_vm._e()]],2)}),_vm._v(\" \"),_c('Upload',{ref:\"upload\",staticStyle:{\"display\":\"inline-block\",\"width\":\"58px\"},attrs:{\"show-upload-list\":false,\"on-success\":_vm.handleSuccess,\"format\":['jpg','jpeg','png'],\"max-size\":2048,\"on-format-error\":_vm.handleFormatError,\"on-exceeded-size\":_vm.handleMaxSize,\"before-upload\":_vm.handleBeforeUpload,\"type\":\"drag\",\"action\":_vm.uploadUrl}},[_c('div',{staticStyle:{\"width\":\"58px\",\"height\":\"58px\",\"line-height\":\"58px\"}},[_c('Icon',{attrs:{\"type\":\"camera\",\"size\":\"20\"}})],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"查看图片\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[(_vm.visible)?_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.imgName}}):_vm._e()])],2),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"对应公寓\",\"prop\":\"houseId\"}},[_c('Select',{staticClass:\"input-width\",attrs:{\"placeholder\":\"请选择对应公寓\"},model:{value:(_vm.formValidate.houseId),callback:function ($$v) {_vm.$set(_vm.formValidate, \"houseId\", $$v)},expression:\"formValidate.houseId\"}},[_vm._l((_vm.houseInfoList),function(item){return [_c('Option',{attrs:{\"value\":item.id + ''}},[_vm._v(_vm._s(item.city + item.region + item.address))])]})],2)],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('formValidate')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"type\":\"ghost\"},on:{\"click\":function($event){_vm.handleReset('formValidate')}}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e884ed3c\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/addRecommend.vue\n// module id = 85\n// module chunks = 3"],"sourceRoot":""}